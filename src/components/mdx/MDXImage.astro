---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

type Props = {
  src: string | ImageMetadata;
  alt: string;
  class?: string;
  width?: number;
  height?: number;
};

const { src, alt, class: className, width, height } = Astro.props;

const isRemote = typeof src === 'string';
---

<figure
  class:list={['my-6 flex flex-col items-center justify-center', className]}
>
  {
    isRemote ? (
      <img
        src={src as string}
        alt={alt}
        width={width}
        height={height}
        loading='lazy'
        decoding='async'
      />
    ) : (
      <Image
        src={src as ImageMetadata}
        alt={alt}
        width={width}
        height={height}
        loading='lazy'
        decoding='async'
      />
    )
  }
  {
    alt && (
      <figcaption class='mt-2.5 px-2 text-center text-sm font-medium text-foreground-secondary/80 italic'>
        {alt}
      </figcaption>
    )
  }
</figure>
